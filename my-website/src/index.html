<!doctype html>
<html lang="th">

<head>
    <meta charset="utf-8" />
    <title>Intro ‚Äî Video+BGM ‚Üí detectchild</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <style>
        :root {
            color-scheme: dark;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            background: #000;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
        }

        body {
            cursor: pointer;
            user-select: none;
        }

        .stage {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
        }

        video.bg {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center center;
            background: #000;
        }

        .hint {
            position: fixed;
            left: 50%;
            bottom: 6%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, .9);
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0, 0, 0, .55);
            pointer-events: none;
            font-size: clamp(12px, 3.2vw, 18px);
        }

        .badge {
            position: fixed;
            left: 12px;
            top: 12px;
            max-width: 88vw;
            background: rgba(0, 0, 0, .45);
            color: #fff;
            padding: 8px 10px;
            border-radius: 10px;
            font-size: 12px;
            line-height: 1.35;
            border: 1px solid rgba(255, 255, 255, .15);
            text-shadow: 0 1px 2px rgba(0, 0, 0, .4);
        }
    </style>
</head>

<body>
    <div class="stage" id="stage">
        <!-- ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á: ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏•‡πà‡∏ô MP4 ‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á WEBM -->
        <video id="bgVideo" class="bg" playsinline muted autoplay loop preload="auto" poster="">
            <!-- ‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏ò‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì -->
            <source src="nonloopface.mp4" type="video/mp4" />
            <source src="nonloopface.mp4" type="video/webm" />
        </video>

        <!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á (‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏ô) -->
        <audio id="bgAudio" src="sound/background.mp3" preload="auto" loop></audio>

        <div class="hint" id="hint">‡πÅ‡∏ï‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠ ‚Üí</div>
        <div class="badge" id="diag" style="display:none"></div>
    </div>

    <script>
        const stageEl = document.getElementById('stage');
        const videoEl = document.getElementById('bgVideo');
        const audioEl = document.getElementById('bgAudio');
        const diagEl = document.getElementById('diag');

        // ===== helper: ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞/‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏ö‡∏ô‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô =====
        function showDiag(msg) {
            diagEl.style.display = 'block';
            diagEl.textContent = msg;
        }

        // ‡∏ö‡∏≤‡∏á‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏∞‡∏¢‡∏≠‡∏° autoplay(video) ‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ muted ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ö‡∏•‡πá‡∏≠‡∏Å audio ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å
        async function tryStartMedia() {
            // ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
            try {
                await videoEl.play();
            } catch (e) {
                showDiag('‚ö†Ô∏è ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ autoplay ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å');
            }
            // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á
            try {
                await audioEl.play();
            } catch (e) {
                showDiag((diagEl.textContent ? diagEl.textContent + ' | ' : '')
                    + 'üéß ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å');
            }
        }

        // ‡∏ñ‡πâ‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ codec/‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏≤‡∏¢ ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î ‡πÜ
        function checkVideoHealth() {
            // 1) ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏´‡∏•‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
            if (videoEl.networkState === HTMLMediaElement.NETWORK_NO_SOURCE) {
                showDiag('‚ùå ‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö (‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏≤‡∏ò/‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•)');
                return;
            }
            // 2) ‡∏ñ‡πâ‡∏≤‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏≤‡∏ô/‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏™‡∏î‡∏á
            setTimeout(() => {
                if (videoEl.readyState < HTMLMediaElement.HAVE_CURRENT_DATA) {
                    showDiag((diagEl.textContent ? diagEl.textContent + ' | ' : '')
                        + 'üïë ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô codec ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö (‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ .webm)');
                }
            }, 1500);
        }

        // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á) ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ detectchild.html
        async function goNext() {
            try { await videoEl.play(); } catch { }
            try { await audioEl.play(); } catch { }
            // ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡πâ promise settle ‡∏Å‡πà‡∏≠‡∏ô
            setTimeout(() => { window.location.href = 'detectchild.html'; }, 0);
        }

        // bind gesture ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤
        ['click', 'pointerdown', 'touchstart', 'keydown'].forEach(ev =>
            stageEl.addEventListener(ev, goNext, { passive: true, once: true })
        );

        // event ‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢
        videoEl.addEventListener('error', () => {
            showDiag('‚ùå ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (error) ‚Äî ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏≤‡∏ò‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞ codec (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ .webm)');
        });
        videoEl.addEventListener('loadedmetadata', () => {
            // ‡∏ñ‡πâ‡∏≤ metadata ‡∏°‡∏≤ ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏≠‡∏î‡∏≥ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ï‡πà‡πÄ‡∏ü‡∏£‡∏°‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á play ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
            // ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏î ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏£‡∏ö‡∏Å‡∏ß‡∏ô
        });
        videoEl.addEventListener('playing', () => {
            // ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á diag ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
            diagEl.style.display = 'none';
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
        window.addEventListener('load', () => {
            tryStartMedia();
            checkVideoHealth();
        });
    </script>
</body>

</html>